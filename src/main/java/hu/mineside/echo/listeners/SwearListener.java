/*
 *     Echo - Discord bot
 *     Copyright (C) 2021  SunStorm (aka. MrExplode)
 *
 *     This program is free software: you can redistribute it and/or modify
 *     it under the terms of the GNU Affero General Public License as published
 *     by the Free Software Foundation, either version 3 of the License, or
 *     (at your option) any later version.
 *
 *     This program is distributed in the hope that it will be useful,
 *     but WITHOUT ANY WARRANTY; without even the implied warranty of
 *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *     GNU Affero General Public License for more details.
 *
 *     You should have received a copy of the GNU Affero General Public License
 *     along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

package hu.mineside.echo.listeners;

import net.dv8tion.jda.api.events.message.guild.GuildMessageReceivedEvent;
import net.dv8tion.jda.api.hooks.SubscribeEvent;

import java.util.Random;
import java.util.regex.Pattern;

public class SwearListener {
    //epic regex see https://github.com/MineSide/RegexGen
    private final Pattern swearRegex = Pattern.compile("((k|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(u|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(r|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(v|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+|(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(n|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(y|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(á|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(d|\\*)+|(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(n|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(y|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(d|\\*)+|(g|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(e|\\*|3)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(c|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(i|\\*)+|(f|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+|(f|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(o|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(m|\\*)+|(c|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(o|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(p|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(y|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(i|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(d|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(e|\\*|3)+|(f|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(i|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(d|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(e|\\*|3)+|(f|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(o|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(p|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(ó|\\*)+|(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(r|\\*)+|(c|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(i|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(c|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(k|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+|(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(r|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(h|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(á|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(i|\\*)+|(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(r|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(o|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+|(b|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(u|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(i|\\*)+|(k|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(i|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(b|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(o|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(t|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(t|\\*)+|(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(ő|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(r|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(ö|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(t|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(l|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(p|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(ú|\\*)+|(c|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(i|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(g|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(á|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(n|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(y|\\*)+|(n|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(i|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(g|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(g|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(e|\\*|3)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(r|\\*)+|(f|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(e|\\*|3)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(l|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(b|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+|(k|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(i|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(b|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+|(m|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(e|\\*|3)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(g|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(b|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+|(á|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(t|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(b|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(a|\\*|4)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(s|\\*)+([$-/:-?{-~!\"^_`\\[\\]\\s+])*(z|\\*)+)", Pattern.CASE_INSENSITIVE);
    //some negative emotes
    private final String[] emotes = new String[] {"\uD83D\uDE2A", "\uD83D\uDE29", "\uD83D\uDE43", "\uD83D\uDE2C", "\uD83D\uDE21", "\uD83E\uDD2C", "\uD83D\uDE44", "\uD83E\uDD10", "\uD83D\uDE24", "\uD83D\uDE33"};
    private final Random random = new Random();

    @SubscribeEvent
    void onMessage(GuildMessageReceivedEvent e) {
        if (swearRegex.matcher(e.getMessage().getContentDisplay()).matches())
            e.getMessage().addReaction(emotes[random.nextInt(emotes.length - 1)]).queue();
    }
}
